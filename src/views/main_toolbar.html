<div
  layout="row"
  class="control-panel">

  <div
    layout="row"
    class="instruments-field">
    <md-button
      flex
      md-no-ink
      aria-label="Bass"
      class="no-hover"
      ng-class="{
        active: ui.instrumentIndex===0
      }"
      ng-click="ui.instrumentIndex=0">
      Bass
      <md-icon md-svg-icon="bass-guitar"></md-icon>
    </md-button>
    <md-button
      flex
      md-no-ink
      aria-label="Drums"
      class="no-hover"
      ng-class="{
        active: ui.instrumentIndex===1
      }"
      ng-click="ui.instrumentIndex=1">
      Drums
      <md-icon md-svg-icon="drums"></md-icon>
    </md-button>
    <md-ink-bar
      ng-class="{
        'md-left': ui.instrumentIndex === 0,
        'md-right': ui.instrumentIndex === 1
      }">
    </md-ink-bar>
  </div>

  <md-menu
    md-offset="56 10">
    <md-button
      md-no-ink
      aria-label="Preferences"
      class="preferences"
      ng-click="$mdOpenMenu($event)">
      <md-icon
        md-svg-icon="preferences">
      </md-icon>
    </md-button>

    <md-menu-content
      md-no-ink
      width="4"
      class="preferences md-whiteframe-16dp">
      <md-list>

        <md-list-item
          class="volume-field bottom-border">
          <label>Bass Volume</label>
          <rzslider
            rz-slider-model="player.bass.audio.gain.value"
            rz-slider-options="{
              floor: 0,
              ceil: 1,
              step: 0.01,
              precision: 2,
              hideLimitLabels: true,
              hidePointerLabels: true,
              showSelectionBar: true,
              disabled: player.bass.muted
            }">
          </rzslider>
          <md-button
            md-no-ink
            aria-label="Mute"
            class="mute-button"
            ng-class="{active: !player.bass.muted}"
            md-prevent-menu-close
            ng-click="toggleVolumeMute(player.bass)">
            <md-icon
              md-svg-icon="{{ player.bass.muted? 'volume-mute' : 'volume-medium' }}">
            </md-icon>
          </md-button>
        </md-list-item>


        <md-list-item
          class="volume-field bottom-border">
          <label>Drums Volume</label>
          <rzslider
            rz-slider-model="player.drums.audio.gain.value"
            rz-slider-options="{
              floor: 0,
              ceil: 1,
              step: 0.01,
              precision: 2,
              hideLimitLabels: true,
              hidePointerLabels: true,
              showSelectionBar: true,
              disabled: player.drums.muted
            }">
          </rzslider>
          <md-button
            md-no-ink
            aria-label="Mute"
            class="mute-button"
            ng-class="{active: !player.drums.muted}"
            md-prevent-menu-close
            ng-click="toggleVolumeMute(player.drums)">
            <md-icon
              md-svg-icon="{{ player.drums.muted? 'volume-mute' : 'volume-medium' }}">
            </md-icon>
          </md-button>
        </md-list-item>

        <md-list-item
          class="volume-field bottom-border">
          <label>Input Volume</label>
          <rzslider
            rz-slider-model="player.input.audio.gain.value"
            rz-slider-options="{
              floor: 0,
              ceil: 1,
              step: 0.01,
              precision: 2,
              hideLimitLabels: true,
              hidePointerLabels: true,
              showSelectionBar: true,
              disabled: player.input.muted
            }">
          </rzslider>
          <md-button
            md-no-ink
            aria-label="Mute"
            class="mute-button"
            ng-class="{active: !player.input.muted}"
            md-prevent-menu-close
            ng-click="toggleInputMute(player.input)">
            <md-icon
              md-svg-icon="{{ player.input.muted? 'volume-mute' : 'volume-medium' }}">
            </md-icon>
          </md-button>
        </md-list-item>
      </md-list>

    </md-menu-content>
  </md-menu>

  <div flex></div>

  <div
    class="bpm-field">
    <md-input-container>
      <label>bpm</label>
      <input
        type="number"
        min="30"
        max="200"
        step="5"
        ng-model="player.bpm">
    </md-input-container>
  </div>

  <div
    layout="row"
    class="playback-fields">
    <md-button
      md-no-ink
      aria-label="Play"
      class="play-stop-button"
      ng-click="player.playing? stop() : play()">
      <md-icon
        md-svg-icon="{{ player.playing? 'stop' : 'play' }}">
      </md-icon>
      {{ player.playing? 'Stop' : 'Play' }}
    </md-button>

    <md-button
      md-no-ink
      aria-label="Countdown"
      class="toggle-button"
      ng-class="{active: player.countdown}"
      ng-click="player.countdown=!player.countdown">
      <md-icon
        md-svg-icon="countdown">
      </md-icon>
    </md-button>

    <md-button
      md-no-ink
      aria-label="Loop"
      class="toggle-button"
      ng-class="{active: player.loop}"
      ng-click="player.loop=!player.loop">
      <md-icon
        md-svg-icon="loop">
      </md-icon>
    </md-button>

    <md-menu
      md-position-mode="target target"
      md-offset="0, 56">
      <md-button
        class="icon-button no-hover"
        ng-click="$mdOpenMenu($event)">
        <md-icon md-svg-icon="range"></md-icon>
      </md-button>
      <md-menu-content
        class="preferences md-whiteframe-16dp">
        <md-list>
          <md-list-item class="range-slider-item playback-range">
            <label>Playback range</label>
            <rzslider
              class="range-slider"
              rz-slider-model="player.playbackRange.start"
              rz-slider-high="player.playbackRange.end"
              rz-slider-options="{
                floor: 1,
                ceil: section.length+1,
                step: 1,
                minRange: 1,
                pushRange: true,
                showTicks: true,
                onEnd: updateSwipersFilter,
                showTicksValues: true
              }">
            </rzslider>
          </md-list-item>
        </md-list>
      </md-menu-content>
    </md-menu>

  </div>

  <div flex></div>

  <div
    layout="row"
    class="project-toolbar"
    ng-controller="ProjectController">
    <md-input-container>
      <label>Section</label>
      <input
        type="text"
        ng-model="project.sectionName">
    </md-input-container>
    <md-input-container>
      <md-select
        md-no-ink
        ng-show="project.sections.length > 0"
        aria-label="Section"
        class="select-editable"
        md-container-class="sections-list"
        ng-model="project.selectedSectionIndex"
        ng-change="loadSection(project.selectedSectionIndex)">
        <md-option
          ui-draggable="true"
          drag="$index"
          ui-on-drag-enter=""
          ui-on-drag-leave=""
          ui-on-drop="dropSection($event, $data, $index, section)"
          drag-channel="section"
          drop-channel="section"

          ng-repeat="section in project.sections | orderBy:section.index track by $index"
          ng-value="$index">
          {{ section.name }}
        </md-option>
      </md-select>
    </md-input-container>
    <md-button
      md-no-ink
      aria-label="Save"
      class="toolbar-button"
      ng-click="saveSection(project.selectedSectionIndex)">
      <md-icon
        md-svg-icon="pen">
      </md-icon>
    </md-button>
    <md-menu
      md-position-mode="target-right target">
      <md-button
        md-no-ink
        aria-label="Menu"
        class="toolbar-button"
        ng-click="$mdOpenMenu($event)">
        <md-icon
          md-svg-icon="menu-dots">
        </md-icon>
      </md-button>
      <md-menu-content
        md-no-ink
        class="md-whiteframe-16dp">
        <md-menu-item>
          <md-button
            md-no-ink
            aria-label="New"
            ng-click="newEmptySection()">
            New
          </md-button>
        </md-menu-item>
        <md-menu-item>
          <md-button
            md-no-ink
            aria-label="Save As"
            ng-click="saveSection()">
            Save As...
          </md-button>
        </md-menu-item>
        <md-menu-item>
          <md-button
            md-no-ink
            aria-label="Delete"
            ng-click="deleteSection(project.selectedSectionIndex)">
            Delete
          </md-button>
        </md-menu-item>

        <md-menu-item>
          <md-button
            md-no-ink
            aria-label="Export"
            ng-click="exportToFile()">
            Export
          </md-button>
        </md-menu-item>

      </md-menu-content>
    </md-menu>
  </div>
</div>