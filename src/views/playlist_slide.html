<div
  class="swiper-slide"
  layout="row">
  <div
    ng-repeat="beat in ::beats"
    layout="column"
    style="position:relative;"
    ng-attr-flex="{{ beat.beat? '' : 'none' }}">
    <div
      ng-if="::beat.sectionInfo"
      class="section-info">
       <div class="bpm">
        {{ ::beat.sectionInfo.bpm }} bpm
      </div>

      <div class="time-signature">
        <div>{{ ::beat.sectionInfo.timeSignature.top }}</div>
        <div>{{ ::beat.sectionInfo.timeSignature.bottom }}</div>
      </div>
      <div class="bass-board instrument-slide">
        <!-- <div
          ng-repeat="string in ::workspace.track.instrument.strings"
          class="">
          <span>{{ ::string.label }}</span>
        </div> -->
        <p ng-repeat="string in ::workspace.track.instrument.strings | orderBy:string.index:'-'">
          {{ string.label }}<sub class="octave-index">{{ string.octave }}</sub><br>
        </p>
      </div>

    </div>

    <!-- Bar -->
    <div
      ng-if-start="::!beat.sectionInfo"
      class="beat beat-{{ ::beat.beat }}">

      <label class="bar-label">
        {{ ::beat.bar }}
      </label>
      <label
        ng-if="::beat.label"
        class="section-label">
        {{ ::beat.label }}
      </label>
      <div
        id="beat_{{ ::beat.bar }}_{{ ::beat.beat }}"
        class="bar-beat"
        layout="row">
        <div
          flex
          class="subbeat">
          <label class="subbeat-label">
            {{ ::beat.beat }}
          </label>
        </div>
        <div
          ng-repeat="label in barLabels[beat.subdivision] track by $index"
          flex
          class="subbeat"
          ng-class="{
            hidden: !swiperControl.swiperConfig.visibleSubbeats[beat.subdivision][$index+2]
          }">
          <label class="subbeat-label">
            {{ ::label }}
          </label>
        </div>
      </div>
    </div>

    <!-- Instrument -->
    <div
      ng-if-end
      class="bass-board instrument-slide beat-{{ ::beat.beat }}">
      <div class="string-container">
        <div
          ng-repeat="string in ::workspace.track.instrument.strings"
          class="bass-string">
        </div>
      </div>
      <div
        ng-repeat="item in ::beat.sounds"
        class="
          bass-sound-wrapper
          string-{{ ::{G: 4, D: 3, A: 2, E: 1, B: 0}[item.sound.string] }}
          {{ ::item.sound.style }}
          {{ ::item.sound.note.type }}
          {{ ::item.sound.noteLength.staccato? 'staccato' : '' }}
        "
        style="
          left: {{ ::100*(item.subbeat-1)/beat.subdivision }}%;
          top: {{ ::{G: '0', D: '36px', A: '72px', E: '108px', B: '144px'}[item.sound.string] }};
          width: {{ ::(100 * 4 * item.sound.noteLength.beatLength) }}%;">
        <div
          class="top-label">
        </div>
        <div
          ng-attr-octave="{{ ::item.sound.note.octave }}"
          class="bass-sound-container">
          <bd-sound-label sound="item.sound"></bd-sound-label>
        </div>
      </div>
    </div>

  </div>
</div>